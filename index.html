<html>
	<head>
		<title>eloi</title>
	</head>
	<script src="jquery-2.1.1.min.js"></script>

	<link href="jquery-ui-1.11.1.custom/jquery-ui.min.css" rel="stylesheet">
	<link href="jquery-ui-1.11.1.custom/jquery-ui.structure.min.css" rel="stylesheet">
	<link href="jquery-ui-1.11.1.custom/jquery-ui.theme.min.css" rel="stylesheet">

	<style>

		td, th { padding:10px; }

	</style>

	<script src="jquery-ui-1.11.1.custom/jquery-ui.min.js"</script>

	<script type="text/javascript">

	</script>
<body style='background: black;'>
<center><h1 style='color: white;'>eloi</h1></center>

<div id="tabs" class="ui-tabs ui-widget ui-widget-content ui-corner-all">
	<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all" role="tablist">
		<li class="ui-state-default ui-corner-top ui-tabs-active ui-state-active" role="tab" tabindex="0" aria-controls="tabs-1" aria-labelledby="ui-id-8" aria-selected="true" aria-expanded="true">
			<a href="#tabs-1" class="ui-tabs-anchor" role="presentation" tabindex="-1" id="ui-id-8">Stats</a>
		</li>
		<li class="ui-state-default ui-corner-top" role="tab" tabindex="-1" aria-controls="tabs-2" aria-labelledby="ui-id-9" aria-selected="false" aria-expanded="false">
			<a href="#tabs-2" class="ui-tabs-anchor" role="presentation" tabindex="-1" id="ui-id-9">Matches</a>
		</li>
		<li class="ui-state-default ui-corner-top" role="tab" tabindex="-1" aria-controls="tabs-3" aria-labelledby="ui-id-10" aria-selected="false" aria-expanded="false">
			<a href="#tabs-3" class="ui-tabs-anchor" role="presentation" tabindex="-1" id="ui-id-10">Players</a>
		</li>
	</ul>
	<div id="tabs-1" aria-labelledby="ui-id-8" class="ui-tabs-panel ui-widget-content ui-corner-bottom" role="tabpanel" aria-hidden="false">
		<table border="1" style='color: white;'>
			<tr><th>#</th><th>Points</th><th>Name</th></tr>
			<tr><td>1</td><td>100</td><td>Holger</td></tr>
			<tr><td>2</td><td>99</td><td>Jochen</td></tr>
			<tr><td>3</td><td>98</td><td>Der Kai</td></tr>
			<tr><td>4</td><td>66</td><td>Stallion</td></tr>
		</table>
	</div>
	<div id="tabs-2" aria-labelledby="ui-id-9" class="ui-tabs-panel ui-widget-content ui-corner-bottom" role="tabpanel" aria-hidden="true" style="display: none;">
		<table id='table_matches' border="1" style='color: white; margin:10px;'>
			<tr><th>#</th><th>Team Blue</th><th>Team Red</th><th>Result</th></tr>
			<tr><td>1</td><td>Holger <br/> Stallion</td><td>Thomas <br/> Jochen</td><td>5:4</td></tr>
			<tr><td>2</td><td>Der Kai <br/> Ayyappan</td><td>Sven <br/> Holger</td><td>3:5</td></tr>
			<tr><td>3</td><td>Stallion <br/> Der Kai</td><td>Holger <br/> Jochen</td><td>5:1</td></tr>
			<tr><td>4</td><td>Ayyappan <br/> Thomas</td><td>Jochen <br/> Sven</td><td>4:5</td></tr>
		</table>
		<button id="button_add_match">Add Match</button>
	</div>
	<div id="tabs-3" aria-labelledby="ui-id-10" class="ui-tabs-panel ui-widget-content ui-corner-bottom" role="tabpanel" aria-hidden="true" style="display: none;">
		<table id='table_players' border="1" style='color: white; padding:10px;'>
			<tr><th>#</th><th>Name</th></tr>
			<tr><td>1</td><td>Jochen</td></tr>
			<tr><td>2</td><td>Der Kai</td></tr>
			<tr><td>3</td><td>Holger</td></tr>
			<tr><td>4</td><td>Stallion</td></tr>
			<tr><td>5</td><td>Ayyappan</td></tr>
			<tr><td>6</td><td>Sven</td></tr>
			<tr><td>7</td><td>Thomas</td></tr>
		</table>

		<button id="button_new_player">Add Player</button>
		<div id="add_player" style='display:none;'>
			<table style='color: white; padding:10px;'>
				<tr><td>Name</td><td><input id='add_player_name'/></td></tr>
				<tr><td>Nickname</td><td><input id='add_player_nick'/></td></tr>
				<tr><td></td><td><button id="button_save_player">Save</button></td></tr>
			</table>
		</div>
		</div>

	</div>
</div>
<script>

function updatePlayers() {

	$.get( "getPlayers", function( data )
	{
		var Players = JSON.parse(data);

		$('#table_players').empty();
		$('#table_players').append( $("<tr><th>#</th><th>Name</th><th>Kampfname</th></tr>"));
		for (var i = 0; i < Players.length; i++)
		{
			console.log('Player: ' + Players[i].name );
			$('#table_players').append( $("<tr><td>"+ i + "</td><td>"+ Players[i].name + "</td><td>"+ Players[i].nick + "</td></tr>"));
		}

	});
}

function  updateMatches() {
	$.get( "getMatches", function( data )
	{
		var Matches = JSON.parse(data);

		$('#table_matches').empty();
		$('#table_matches').append( $("<tr><th>#</th><th style='color: rgb(180, 180, 255);'>Team Blue</th><th style='color: rgb(255, 180, 180);'>Team Red</th><th>Result</th></tr>"));

		for (var i = 0; i < Matches.length; i++)
		{
			$('#table_matches').append( $("<tr><td>" + Matches[i].id + '</td><td>' + Matches[i].team_red.defense + '<br/>' + Matches[i].team_red.offense + '</td><td>' + Matches[i].team_blue.defense + '<br/>' + Matches[i].team_blue.offense + '</td><td>' + Matches[i].team_blue.goals + '&nbsp;:&nbsp;' + Matches[i].team_red.goals + '</td></tr>'));
		}

	});

}

$( "#tabs" ).tabs();
$( "#button_new_player" ).button();
$( "#button_new_player" ).click(function() {
	$( "#add_player_name" ).val('');
	$("#add_player_nick").val('');
	$("#add_player").css('display', 'block');
});
$( "#button_save_player" ).button();
$( "#button_save_player" ).click(function() {
	//alert('New Player: ' + $( "#add_player_name" ).val() + ' - ' + $("#add_player_nick").val() );
	$("#add_player").css('display', 'none');
	
	$.get( "addPlayer", { name: $( "#add_player_name" ).val(), nick: $("#add_player_nick").val() } )
  		.done(function( data ) {
		    
		    updatePlayers();
  });
});

$( "#button_add_match" ).button();
$( "#button_add_match" ).click(function() {
	//alert('New Player: ' + $( "#add_player_name" ).val() + ' - ' + $("#add_player_nick").val() );
	//$("#add_player").css('display', 'none');
	
	$.get( "addMatch", {team_red_defense:'thomas', team_red_offense: 'holger', team_red_goals: 5, team_blue_defense: 'jochen', team_blue_offense: 'kai', team_blue_goals:4} )
  		.done(function( data ) {
		    
		    updateMatches();
  });
});




updatePlayers();
updateMatches();

</script>
</body>
</html>
